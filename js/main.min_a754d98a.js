var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{_(r.next(e))}catch(t){o(t)}}function a(e){try{_(r["throw"](e))}catch(t){o(t)}}function _(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,a)}_((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return r([e,t])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;_;)try{if(n=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return _.label++,{value:i[1],done:!1};case 5:_.label++,o=i[1],i=[0];continue;case 7:i=_.ops.pop(),_.trys.pop();continue;default:if(s=_.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){_=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){_.label=i[1];break}if(6===i[0]&&_.label<s[1]){_.label=s[1],s=i;break}if(s&&_.label<s[2]){_.label=s[2],_.ops.push(i);break}s[2]&&_.ops.pop(),_.trys.pop();continue}i=t.call(e,_)}catch(r){i=[6,r],o=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,s,a,_={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},CarEntity=function(){function e(){this.is_destroyed=!1}return e.prototype._status_init=function(e){this.s=new CarStatus,this.s.sinit(e)},e.prototype.car_init=function(e,t){this.param=t,this._status_init(e),this.view=this._create_view(),this.view.bind_ee(this),this.view.visible=!1},e.prototype._update_fr=function(){},e.prototype.frame_update=function(){this._update_fr(),this._syn_pos()},e.prototype._syn_pos=function(){this.is_destroyed||(this.view.x=this.s.pos.x,this.view.y=this.s.pos.y)},e.prototype.destroy=function(){this.is_destroyed=!0,this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.s=null},e}();__reflect(CarEntity.prototype,"CarEntity");var CarDisplay=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._create_bg_display=function(e,t){var i=new eui.Rect;this.addChild(i),i.fillColor=16777215*Math.random(),i.width=e,i.height=t,i.x=-Math.round(.5*e),i.y=-Math.round(.5*t),this.bgrect=i},t.prototype._create_sprite=function(e){var t=new eui.Image(e.s.sprite);this.addChild(t),t.width=e.s.size.width,t.height=e.s.size.height,t.x=-Math.round(.5*e.s.size.width),t.y=-Math.round(.5*e.s.size.height),this.sprite=t},t.prototype.bind_ee=function(e){var t=e.s.size.width,i=e.s.size.height;this._create_sprite(e),this.lbl=new eui.Label,this.addChild(this.lbl),this.lbl.width=t,this.lbl.height=i,this.lbl.x=-Math.round(.5*t),this.lbl.y=-Math.round(.5*i),this.lbl.textAlign="center",this.lbl.verticalAlign="middle",this.lbl.text=e.s.health+""},t.prototype.update_health=function(e){this.lbl.text=e+""},t}(eui.Group);__reflect(CarDisplay.prototype,"CarDisplay");var GamePlayCore=function(){function e(){this._frame_cursor=0,this._samples=[[0],[1],[2],[3],[4],[0,1],[0,3],[0,4],[1,2],[1,4],[1,3],[2,3],[2,4],[3,4],[0],[1],[2],[3],[4],[0,2,4],[1,3,4],[0,2,3],[1,2,4],[2,3,4],[0,3,4],[0],[1],[2],[3],[4],[0,1,2,3],[0,1,2,4],[0,1,3,4],[0,2,3,4],[1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4]]}return e.prototype.core_init=function(e){this.param=new global_game_param.global_param,global_game_param.parse(RES.getRes("global_param_json"),this.param),this.core_view=e,this.playground=e.playground,this.ih=new InputHandler,this.ih.session_start(e),this.player=new PlayerCar,this.player.car_init(new ns_sirius.Size(game_config.player_w,game_config.player_h),null),this.player.show(),this.enemies=new Array},e.prototype.game_start=function(){egret.Ticker.getInstance().register(function(e){dragonBones.WorldClock.clock.advanceTime(e/1e3),ns_sirius.world_clock.update(e)},this),ns_sirius.world_clock.add(this)},e.prototype.update=function(e){this._frame_cursor++;var t=gp_core.param.interval.enemy_born;this._frame_cursor%t===0&&this._born_enemies();for(var i=0;i<this.enemies.length;i++){var r=this.enemies[i];r.is_destroyed?console.error("is_destroyed"):this.enemies[i].frame_update()}this.player.frame_update(),this.core_view.frame_update()},e.prototype._born_single_enemy=function(e){var t=new EnemyCar;t.car_init(new ns_sirius.Size(game_config.enemy_w,game_config.enemy_h),e),t.show(),this.enemies.push(t)},e.prototype._born_enemies=function(){for(var e=this._samples.length,t=ns_sirius.random_region(0,e),i=this._samples[t],r=0;r<i.length;r++)this._born_single_enemy(i[r])},e.prototype.destroy_enemy=function(e){e.destroy();var t=this.enemies.indexOf(e);0>t||this.enemies.splice(t,1)},e}();__reflect(GamePlayCore.prototype,"GamePlayCore",["ns_sirius.IAnimatable"]);var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,r){function n(e){t.call(r,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(r))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var a=e.split("/");a.pop();var _=a.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(r,generateJSON.paths[e])},this):RES.getResByUrl(_,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(r,generateJSON.paths[e])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function r(r){t.call(i,r,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?r(n):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var CarStatus=function(){function e(){}return e.prototype.sinit=function(e){this.size=new ns_sirius.Size(e.width,e.height),this.rec=new egret.Rectangle,this.rec.width=this.size.width,this.rec.height=this.size.height,this.pos=new egret.Point,this.pos.y=-140;var t=gp_core.param.health.enemy_health_rand_min,i=gp_core.param.health.enemy_health_rand_max;this.health=Math.round(ns_sirius.random_region(t,i)),this.sprite=Math.random()>.5?"car_red_02_png":"car_blue_02_png";var r=ns_sirius.random_region(-gp_core.param.speed.enemy_move_speed_random_region,gp_core.param.speed.enemy_move_speed_random_region);this.move_speed=gp_core.param.speed.world_move_speed+r},e.prototype.cal_rect=function(){this.rec.x=this.pos.x-.5*this.size.width,this.rec.y=this.pos.y-.5*this.size.height},e}();__reflect(CarStatus.prototype,"CarStatus");var EnemyCar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._create_view=function(){return gp_core.playground.create_enemy()},t.prototype._rand_pos_x=function(){var e=game_config.column_middle_pos[this.param];return e},t.prototype.show=function(){if(this.s.pos.x=this._rand_pos_x(),gp_core.param.interval.enemy_born_random_region>0){var e=Math.round(ns_sirius.random_region(-gp_core.param.interval.enemy_born_random_region,gp_core.param.interval.enemy_born_random_region));this.s.pos.y+=e}this.view.visible=!0},t.prototype._update_fr=function(){this.s.pos.y+=this.s.move_speed,this.s.cal_rect(),this.s.pos.y>game_config.dead_line_bottom&&gp_core.destroy_enemy(this)},t.prototype.receive_dmg=function(e){this.s.health-=e,this.view.update_health(this.s.health),this.s.health<=0&&gp_core.destroy_enemy(this)},t.prototype.prepare_to_die=function(){this.s.health=0,gp_core.destroy_enemy(this)},t}(CarEntity);__reflect(EnemyCar.prototype,"EnemyCar");var PlayerCar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._status_init=function(t){e.prototype._status_init.call(this,t),this.s.health=gp_core.param.health.player_health,this.s.sprite=Math.random()>.5?"car_11_png":"car_5_png"},t.prototype.car_init=function(t,i){e.prototype.car_init.call(this,t,i),this._emit_pos=new egret.Point,this._emitter=new BulletEmitter,this._emitter.emitter_init(this)},t.prototype._create_view=function(){return gp_core.playground.create_player()},t.prototype.show=function(){this._syn_player_pos(),this.view.visible=!0},t.prototype.frame_update=function(){this._syn_player_pos();var e=this._judge_contract();return e?(e.prepare_to_die(),void this.receive_dmg(1)):void this._emitter.frame_update()},t.prototype._syn_player_pos=function(){var e=gp_core.ih.player_pos;this.s.pos.copyFrom(e),this.s.cal_rect(),this._syn_pos(),this._emit_pos.x=e.x,this._emit_pos.y=e.y-game_config.player_hh},t.prototype._judge_contract=function(){if(this.is_destroyed)return null;for(var e=gp_core.enemies,t=0;t<e.length;t++){var i=e[t],r=i.s.rec;if(this.s.rec.intersects(r))return i}return null},t.prototype.receive_dmg=function(e){this.s.health-=e,this.view.update_health(this.s.health),this.s.health<=0&&app_main.game_over()},t.prototype.prepare_to_die=function(){this.s.health=0,app_main.game_over()},t}(CarEntity);__reflect(PlayerCar.prototype,"PlayerCar");var BulletEntity=function(){function e(){this.is_destroyed=!1}return e.prototype.bullet_init=function(e,t,i){this.car=t,this.e=i,this.s=new BulletStatus,this.s.pos.x=this.car._emit_pos.x,this.s.pos.y=this.car._emit_pos.y-this.s.size.height,this.view=e,this.view.bind_ee(this),this._syn_pos()},e.prototype.destroy=function(){this.is_destroyed=!0,this.view.parent&&this.view.parent.removeChild(this.view),this.car=null,this.view=null,this.s=null,this.e=null},e.prototype.frame_update=function(){this.s.pos.y-=gp_core.param.speed.bullet_speed,this.s.cal_rect();var e=this._judge_contract();if(e){var t=gp_core.param.dmg.player_bullet_dmg;return e.receive_dmg(t),void this.e.destroy_bullet(this)}return this.s.pos.y<0?void this.e.destroy_bullet(this):void this._syn_pos()},e.prototype._syn_pos=function(){this.is_destroyed||(this.view.x=this.s.pos.x,this.view.y=this.s.pos.y)},e.prototype._judge_contract=function(){if(this.is_destroyed)return null;for(var e=gp_core.enemies,t=0;t<e.length;t++){var i=e[t],r=i.s.rec;if(this.s.rec.intersects(r))return i}return null},e}();__reflect(BulletEntity.prototype,"BulletEntity");var BulletStatus=function(){function e(){this.pos=new egret.Point,this.size=new ns_sirius.Size(10,20),this.rec=new egret.Rectangle,this.rec.width=this.size.width,this.rec.height=this.size.height,this.sprite="bullet_png"}return e.prototype.cal_rect=function(){this.rec.x=this.pos.x-.5*this.size.width,this.rec.y=this.pos.y-.5*this.size.height},e}();__reflect(BulletStatus.prototype,"BulletStatus");var game_config;!function(e){function t(t){e.initial_screen_h=t,e.playground_w=e.stage_design_w-2*e.gap_horizontal,e.playground_h=Math.ceil(t)-2*e.gap_vertical,e.column_width=Math.round(e.playground_w/e.column_count),this.column_middle_pos=new Array(e.column_count);for(var i=0;i<e.column_count;i++){var r=i*e.column_width+.5*e.column_width;this.column_middle_pos[i]=r}e.enemy_w=90,e.enemy_h=Math.round(17460/122),e.player_w=90,e.player_h=Math.round(90090/474),e.player_hw=Math.round(.5*e.player_w),e.player_hh=Math.round(.5*e.player_h),e.min_x=e.player_hw,e.max_x=e.playground_w-e.player_hw,e.player_default_y=e.playground_h-326,e.dead_line_top=-e.enemy_h,e.dead_line_bottom=e.playground_h+e.enemy_h}e.stage_design_w=640,e.stage_design_h=1136,e.gap_horizontal=15,e.gap_vertical=0,e.column_count=5,e.initial_screen_h=0,e.screen_w=0,e.screen_h=0,e.playground_w=0,e.playground_h=0,e.column_width=0,e.enemy_w=0,e.enemy_h=0,e.player_w=0,e.player_h=0,e.player_hw=0,e.player_hh=0,e.min_x=0,e.max_x=0,e.player_default_y=0,e.dead_line_top=0,e.dead_line_bottom=0,e.config_init=t}(game_config||(game_config={}));var global_game_param;!function(e){function t(e,t){t.speed=e.speed,t.dmg=e.dmg,t.health=e.health,t.interval=e.interval}var i=function(){function e(){}return e}();__reflect(i.prototype,"speed");var r=function(){function e(){}return e}();__reflect(r.prototype,"dmg");var n=function(){function e(){}return e}();__reflect(n.prototype,"health");var o=function(){function e(){}return e}();__reflect(o.prototype,"interval");var s=function(){function e(){}return e}();e.global_param=s,__reflect(s.prototype,"global_game_param.global_param"),e.parse=t}(global_game_param||(global_game_param={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BulletEmitter=function(){function e(){this._born_cursor=0}return e.prototype.emitter_init=function(e){this.car=e,this.bullets=new Array},e.prototype.frame_update=function(){this._born_cursor++;var e=gp_core.param.interval.bullet_emit;this._born_cursor>e&&(this._born_cursor=0,this._born_bullet());for(var t=0;t<this.bullets.length;t++){var i=this.bullets[t];i.is_destroyed||i.frame_update()}},e.prototype._born_bullet=function(){var e=new BulletEntity,t=gp_core.playground.create_bullet();e.bullet_init(t,this.car,this),this.bullets.push(e)},e.prototype.destroy_bullet=function(e){e.destroy();var t=this.bullets.indexOf(e);0>t||this.bullets.splice(t,1)},e}();__reflect(BulletEmitter.prototype,"BulletEmitter");var InputHandler=function(){function e(){this._start_player=new egret.Point,this._start_mouse=new egret.Point}return e.prototype.session_start=function(e){this.cw=game_config.playground_w,this.ch=game_config.playground_h,this.player_pos=new egret.Point(.5*this.cw,game_config.player_default_y),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._handle_touch_down,this),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,this._handle_touch_move,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this._handle_touch_up,this)},e.prototype._handle_touch_down=function(e){this._start_mouse.x=e.stageX,this._start_mouse.y=e.stageY,this._start_player.copyFrom(this.player_pos)},e.prototype._handle_touch_move=function(e){var t=e.stageX-this._start_mouse.x,i=e.stageY-this._start_mouse.y,r=this._start_player.x+1.5*t;this._start_player.y+1.5*i;r<game_config.min_x&&(r=game_config.min_x),r>game_config.max_x&&(r=game_config.max_x),this.player_pos.x=r},e.prototype._handle_touch_up=function(e){},e}();__reflect(InputHandler.prototype,"InputHandler");var GameCoreView=function(e){function t(){var t=e.call(this)||this,i=new DecorationCover;t.addChild(i),i.horizontalCenter=0,i.width=game_config.playground_w,i.height=game_config.playground_h,i.bottom=0,t.dd=i;var r=new Playground;return t.addChild(r),r.horizontalCenter=0,r.width=game_config.playground_w,r.height=game_config.playground_h,r.bottom=0,t.playground=r,t}return __extends(t,e),t.prototype.frame_update=function(){this.dd.frame_update()},t}(eui.Group);__reflect(GameCoreView.prototype,"GameCoreView");var BulletDisplay=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._create_bg_display=function(e,t){var i=new eui.Rect;this.addChild(i),i.fillColor=0,i.width=e,i.height=t,i.x=-Math.round(.5*e),i.y=-Math.round(.5*t),this.bgrect=i},t.prototype._create_sprite=function(e){var t=new eui.Image(e.s.sprite);this.addChild(t),t.width=22,t.height=66,t.x=-Math.round(.5*t.width),t.y=-Math.round(.5*t.height),this.sprite=t},t.prototype.bind_ee=function(e){var t=e.s.size.width,i=e.s.size.height;this._create_bg_display(t,i),this._create_sprite(e)},t}(egret.DisplayObjectContainer);__reflect(BulletDisplay.prototype,"BulletDisplay");var gp_core,app_main,Main=function(e){function t(){var t=e.call(this)||this;return app_main=t,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return i.sent(),this.stage.removeChild(e),[3,5];case 4:return t=i.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){var e=this;this.stage.addEventListener(egret.Event.RESIZE,function(t){game_config.screen_w=e.stage.stageWidth,game_config.screen_h=e.stage.stageHeight},this),game_config.config_init(this.stage.stageHeight);var t=new eui.Rect;this.addChild(t),t.fillColor=2764919,t.percentWidth=100,t.percentHeight=100;var i=new GameCoreView;this.addChild(i),i.percentWidth=100,i.percentHeight=100,i.bottom=0,i.horizontalCenter=0,gp_core=new GamePlayCore,gp_core.core_init(i),setTimeout(function(){gp_core.game_start()},500)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.onButtonClick=function(e){},t.prototype.game_over=function(){ns_sirius.world_clock.time_scale=0;var e=new eui.Panel;e.title="GameOver",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var PlayerDisplay=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._create_turret=function(e){var t=new eui.Image("gun_png");this.addChild(t),t.width=40,t.height=40,t.x=-Math.round(.5*t.width),t.y=-Math.round(.5*e.s.size.height)-t.height,this.turret=t},t.prototype.bind_ee=function(t){e.prototype.bind_ee.call(this,t),this._create_turret(t)},t}(CarDisplay);__reflect(PlayerDisplay.prototype,"PlayerDisplay");var Playground=function(e){function t(){var t=e.call(this)||this,i=new eui.Rect;return t.addChild(i),i.percentWidth=100,i.percentHeight=100,i.fillAlpha=0,i.fillColor=0,i.alpha=0,t._bullets_container=new eui.Group,t.addChild(t._bullets_container),t._bullets_container.percentWidth=100,t._bullets_container.percentHeight=100,t}return __extends(t,e),t.prototype.create_player=function(){var e=new PlayerDisplay;return this.addChild(e),e},t.prototype.create_enemy=function(){var e=new CarDisplay;return this.addChild(e),e},t.prototype.create_bullet=function(){var e=new BulletDisplay;return this._bullets_container.addChild(e),e},t}(eui.Group);__reflect(Playground.prototype,"Playground");var DecorationCover=function(e){function t(){var t=e.call(this)||this;t.line_height=168,t.line_width=4,t.line_gap=225,t.row_h=0,t.line_row_count=0,t._start_offset=0,t.touchEnabled=!1,t.touchChildren=!1,t.row_h=t.line_height+t.line_gap,t.line_row_count=Math.floor(game_config.initial_screen_h/t.row_h)+2,t._rows=new Array(t.line_row_count);for(var i=0;i<t.line_row_count;i++){var r=new DecorationRow(t.line_width,t.line_height);t.addChild(r),t._rows[i]=r,r.percentWidth=100,r.height=t.line_height}return t._update_pos_y(),t}return __extends(t,e),t.prototype._cal_y=function(e){var t=this._start_offset+game_config.initial_screen_h-e*(this.line_height+this.line_gap)-this.line_height;return t},t.prototype._update_pos_y=function(){for(var e=0;e<this.line_row_count;e++)this._rows[e].y=this._cal_y(e)},t.prototype.frame_update=function(){this._start_offset+=gp_core.param.speed.world_move_speed,this._start_offset>=this.row_h&&(this._start_offset-=this.row_h,this._swap()),this._update_pos_y()},t.prototype._swap=function(){for(var e=this._rows[0],t=0;t<this.line_row_count-1;t++)this._rows[t]=this._rows[t+1];this._rows[this.line_row_count-1]=e},t}(eui.Group);__reflect(DecorationCover.prototype,"DecorationCover");var DecorationRow=function(e){function t(t,i){var r=e.call(this)||this;r.line_width=t,r.line_height=i;for(var n=1;n<game_config.column_count;n++)r._create_line(n*game_config.column_width);return r}return __extends(t,e),t.prototype._create_line=function(e){var t=new eui.Rect;return this.addChild(t),t.fillColor=8885736,t.width=this.line_width,t.height=this.line_height,t.x=e-.5*this.line_width,t.y=0,t},t}(eui.Group);__reflect(DecorationRow.prototype,"DecorationRow");var math_lib;!function(e){function t(e,t){return e.containsRect(t)}e.aabb=t}(math_lib||(math_lib={}));var ConfigPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/module_skins/config/config.exml",t}return __extends(t,e),t}(eui.Component);__reflect(ConfigPanel.prototype,"ConfigPanel");var ns_sirius;!function(e){function t(e,t){for(var i=Object.keys(e),r=i.length,n=0;r>n;n++){var o=i[n],s=e[o],a=t(s);if(a===!0)break}}function i(e,t){for(var i=Object.keys(e),r=i.length,n=0;r>n;n++){var o=i[n],s=e[o],a=t(o,s);if(a===!0)break}}function r(e,t){var i=e.indexOf(t);0>i||e.splice(i,1)}function n(e,t){var i=Math.floor(Math.random()*(t-e))+e;return i}e.loop_values=t,e.loop_pps=i,e.arr_robj=r,e.random_region=n}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(e){var t=function(){function e(){this._animatebles=new Array,this._timeScale=1}return e.frame_to_ms=function(e){return Math.round(1e3*e/60)},Object.defineProperty(e.prototype,"time_scale",{get:function(){return this._timeScale},set:function(e){this._timeScale=e},enumerable:!0,configurable:!0}),e.prototype.update=function(e){if(1!==this._timeScale&&(e*=this._timeScale),0!=e&&!(0>e)){for(var t=0,i=0,r=this._animatebles.length;r>t;++t){var n=this._animatebles[t];null!==n?(i>0&&(this._animatebles[t-i]=n,this._animatebles[t]=null),n.update(e)):i++}if(i>0){for(r=this._animatebles.length;r>t;++t){var o=this._animatebles[t];null!==o?this._animatebles[t-i]=o:i++}this._animatebles.length-=i}}},e.prototype.add=function(e){e&&this._animatebles.indexOf(e)<0&&(this._animatebles.push(e),e.clock=this)},e.prototype.clear=function(){for(var e=0,t=this._animatebles;e<t.length;e++){var i=t[e];null!==i&&(i.clock=null)}},e.prototype.remove=function(e){var t=this._animatebles.indexOf(e);t>=0&&(this._animatebles[t]=null,e.clock=null)},e.prototype.removeAt=function(e){e>=0&&(this._animatebles[e].clock=null,this._animatebles[e]=null)},e}();e.anim_clock=t,__reflect(t.prototype,"ns_sirius.anim_clock"),e.world_clock=new t}(ns_sirius||(ns_sirius={}));var ns_sirius;!function(e){var t=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.width=e,this.height=t}return e}();e.Size=t,__reflect(t.prototype,"ns_sirius.Size")}(ns_sirius||(ns_sirius={}));